<div class="window" style="padding-top: 1.5rem;">
  <div class="window-content">
    <div class="pane-group">

  	<div class="pane" style="padding: 2rem;padding-top: 0">
  		<h3><u><span class="icon icon-monitor icon-text" style="color:#4e5851;padding-right:1rem "></span>Laptop Details</u></h3>
   
  	<div class="form-group">
    	<label> Region</label>
  		<select class="form-control input" id="region_select">
  		</select>
  	</div>
	<div class="form-group">
   		<label>Department</label>
  		<select class="form-control input"  id="dept_select">
  		</select>
 	</div>

  	<div class="form-group">
    	<label>Laptop Model</label>
    	<input class="form-control input" placeholder="e.g acvn7791g589">
  	</div>

  	<div class="form-group">
    	<label>Laptop Serial</label>
   	 	<input class="form-control input" placeholder="e.g HP Pavilion">
  	</div>
  	<div class="form-group">
    	<label><span class="icon icon-keyboard icon-text"></span> Keyboard Type</label>
   	 	<input class="form-control input" placeholder="e.g Logitech G213">
  	</div>
  	<div class="form-group">
    	<label><span class="icon icon-mouse icon-text"></span> Mouse Type</label>
   	 	<input class="form-control input" placeholder="e.g Logitech G502">
  	</div>

<h3><u><span class="icon icon-shareable icon-text" style="color:#4e5851;padding-right:1rem "></span>Software Checks</u></h3>
   
    <div class="form-group">
        <label>Computer Name</label>
        <input class="form-control input" placeholder="e.g laptop-54as">
      </div>
 
</div>
 <!--Second Pane-->
 <div class="pane" style="padding:2rem;padding-top: 0">
  		<div class="form-group">
   			<label>Operating System</label>
  			<select class="form-control input"  id="os_select">
  			</select>
 		</div>
  		<div class="radio input">
    		<label><input type="radio" name="os-key" value="activated" id='_a' checked="checked">Activated</label>
    		<label><input type="radio" name="os-key" value="not-activated" id="_b">Not Activated</label>
    	</div>
    	<div class="form-group">
    		<label>Processors</label>
   	 		<input class="form-control input" placeholder="e.g i3-3220 cpu @ 3.3GHZ">
  		</div>
  		<div class="form-group">
    		<label>RAM Capacity</label>
   	 		<input class="form-control input" placeholder="e.g 4gb">
  		</div>
  		<div class="form-group">
   			<label>MS Office</label>
  			<select class="form-control input"  id="ms_select">
  			</select>
 		</div>
  		<div class="radio input">
    		<label><input type="radio" name="ofc-key" value="activated" id="_c" checked="checked">Activated</label>
    		<label><input type="radio" name="ofc-key" value="not-activated" id="_d">Not Activated</label>
    	</div>
      <div class="form-group">
      <label>IP</label>
      <input class="form-control input" placeholder="e.g 192.168.124.40">
    </div>
    	<div class="form-group">
    		<label> <span class="icon icon-drive icon-text"></span> Remaining Storage</label>
   	 		<input class="form-control input" placeholder="e.g 247gb">
  		</div>
        <h3><u><span class="icon icon-print icon-text" style="color:#4e5851;padding-right:1rem "></span>Printer</u></h3>
   
  <div class="form-group">
      <label>Printer Model</label>
      <input class="form-control input" placeholder="e.g Laserjet Pro M402dne">
    </div>

    <div class="form-group">
      <label>Printer Serial</label>
      <input class="form-control input" placeholder="e.g PHC6728322">
    </div>
 	 
 </div>
 <!--Third Pane -->
 <div class="pane" style="padding:2rem;padding-top: 0">
	<h3><u><span class="icon icon-cc-share icon-text" style="color:#4e5851;padding-right:1rem "></span>Scanner</u></h3>
	 <div class="form-group">
    	<label>Scanner Model</label>
    	<input class="form-control input" placeholder="e.g Laserjet Pro M402dne">
  	</div>
  	<div class="form-group">
    	<label>Scanner Serial</label>
   	 	<input class="form-control input" placeholder="e.g PHC6728322">
  	</div>
  	
    <h3><u><span class="icon icon-user icon-text" style="color:#4e5851;padding-right:1rem "></span>Technician Details</u></h3> 
    <div class="form-group">
      <label>Technician Name</label>
      <select class="form-control input"  id="tech_name_select">
      </select>
    </div>
    <div class="form-group">
      <label>Date</label>
      <input type="date" class="form-control input">
    </div>

    <div class="form-group">
      <label>Log</label>
      <textarea type="date" class="form-control input" rows="7" ></textarea>
    </div>
      <div class="form-group  pull-right">
      <button class="btn btn-primary submit">
      Save Changes
      </button>
        <button class="btn btn-positive discard">
      Cancel
      </button>
        <button class="btn btn-negative delete">
      Delete
      </button>
    </div>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
  const { init_data} = require('../res/reusable');
  var db = init_data(Dexie);
  let automate = (db,table,id,callback)=>{
    db[table].each(result=>{
      for (const key of Object.keys(result)) {
        if(key == '__proto__' || key ==='id'){ continue}
       else if(key =='name'){
        if(result[key]){
          let btn_region = document.querySelector(id);
          let opt=document.createElement('option');
          opt.text = result[key];
          btn_region.add(opt);}
        }


    }
  }).then(()=>{
    callback();
  });
}
// automate(db,'regions','#region_select');
// automate(db,'departments','#dept_select');
// automate(db,'os','#os_select');
// automate(db,'ms_office','#ms_select');
// automate(db,'tech_name','#tech_name_select');
 //When Enter is Pressed
let inputs_x= document.querySelectorAll('.input');
for(let i = 0; i < inputs_x.length; i++){
  //When Enter is pressed move down
  inputs_x[i].onkeyup=event=>{
  if(event.keyCode == 13){
    event.preventDefault();
    let y=i+1;
  try{  
    inputs_x[y].focus();
  }
  catch(err){
    //do nothing 
  } } }

}

//Module getting the database dirty
let submitbtn = document.querySelector(".submit");
let datatabe_names = ['region','department','pc_model','pc_serial','keyboard','mouse','comp_name','os','os_status','processor','ram','ms_office','ms_status','ip','rem_storage','printer_model','printer_serial','scanner_model','scanner_serial','tech_name','date','log'];
let inputs_values = document.querySelectorAll('.input');
inputs_values.forEach((item,index)=>{
  if(datatabe_names[index]=='os_status'){
  //data[datatabe_names[index]] = document.querySelector('input[name="os-key"]:checked').value;
    if (window.data[datatabe_names[index]]=='activated') {
      document.querySelector('#_a').checked=true;
    }else{
      document.querySelector('#_b').checked=true;
    }
  }else if(datatabe_names[index]=='ms_status'){
    //data[datatabe_names[index]] = document.querySelector('input[name="ofc-key"]:checked').value;
    if (window.data[datatabe_names[index]]=='activated') {
      document.querySelector('#_c').checked=true;
    }else{
      document.querySelector('#_d').checked=true;

    }
  }else if(item.id=="region_select"){
    automate(db,'regions','#region_select',()=>{
      item.value=window.data[datatabe_names[index]];   
    });
  }else if(item.id=="dept_select"){
    automate(db,'departments','#dept_select',()=>{
      item.value=window.data[datatabe_names[index]];   
    });
  }else if(item.id=="os_select"){
    automate(db,'os','#os_select',()=>{
      item.value=window.data[datatabe_names[index]];   
    });
  }else if(item.id=="ms_select"){
    automate(db,'ms_office','#ms_select',()=>{
      item.value=window.data[datatabe_names[index]];   
    });
  }else if(item.id=="tech_name_select"){
    automate(db,'tech_name','#tech_name_select',()=>{
      item.value=window.data[datatabe_names[index]];   
    });
  }
  else{
   item.value=window.data[datatabe_names[index]];  
  }
  
});

//save changes
submitbtn.onclick = event => {
  inputs_values.forEach((item,index)=>{
       if(datatabe_names[index]=='os_status'){
        let checked_val=document.querySelector('input[name="os-key"]:checked').value;
       db.laptops.update( window.data['id'], {[datatabe_names[index]]:checked_val})
       }else if(datatabe_names[index]=='ms_status'){
         let checked_val=document.querySelector('input[name="ofc-key"]:checked').value;
       db.laptops.update( window.data['id'], {[datatabe_names[index]]:checked_val})
       }else{
     db.laptops.update( window.data['id'], {[datatabe_names[index]]:item.value})
   }
  });

document.querySelector('#laptops').click();
    notifier.notify(
  {
    title: 'Changes Saved',
    message: 'Laptop changes saved successfully',
    icon: path.join(__dirname, '../icons/icon.png'), 
    sound: true,
  });

}
//discard
let btn_discard = document.querySelector(".discard");
btn_discard.onclick = event =>{
  document.querySelector('#laptops').click();
  notifier.notify(
  {
    title: 'Discard',
    message: 'Changes Ignored',
    icon: path.join(__dirname, '../icons/icon.png'), 
    sound: true,
  });
}
//delete
let btn_delete = document.querySelector(".delete");
btn_delete.onclick = event =>{
  db.laptops.delete(window.data['id']);
  document.querySelector('#laptops').click();
  notifier.notify(
  {
    title: 'Deleted',
    message: 'Laptop details deleted',
    icon: path.join(__dirname, '../icons/icon.png'), 
    sound: true,
  });
}



</script>